[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "SCTO Statistics and Methodology platform tools and support",
    "section": "",
    "text": "Topics are split according to the target audience, clinicians or programmers."
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "This site was developed by statisticians of the SCTO statistics and methodology platform."
  },
  {
    "objectID": "somethingelse.html",
    "href": "somethingelse.html",
    "title": "Something else",
    "section": "",
    "text": "Here’s another"
  },
  {
    "objectID": "SampleSizeCalculation.html",
    "href": "SampleSizeCalculation.html",
    "title": "Sample size calculation",
    "section": "",
    "text": "Quiz\nHere is a short quiz to check your understanding…\n\n\nQuestion 1: In a court room, the defendant is incorrectly sentenced to prison. This is an example of…\n\nA. A type 1 error\nB. A type 2 error\n\n\n\nAnswer\n\nA is the correct answer. The defendant is innocent, so sentencing them to prison is wrong, a false positive.\n\n\n\nQuestion 2: Type 2 errors are controlled by\n\nA. Test significance\nB. Larger sample size\nC. Power\nD. Smaller variation between participants\n\n\n\nAnswer\n\nB or C - a larger sample increases power which reduces the risk of a type 2 error\n\n\n\nQuestion 3: You suspect that there is a difference between treatments and want to quantify that difference to within a certain margin. What paradigm are you in?\n\nA. Null-hypothesis testing\nB. Bayesian\nC. Precision\nD. Frequentist\n\n\n\nAnswer\n\nC - you’re not testing a difference, just trying the estimate the quantity to within a given limit\n\n\n\nQuestion 4: Continuing from the Question 3. Suppose instead that you want to test if one treatment has a higher mean value of an outcome than the other treatment. What information would the statistician need to perform a sample size calculation? Check all that might apply.\n\nA. The cost of determining the outcome\nB. The mean value of the outcome in the relevant population\nC. An estimate of the variability within the population\nD. An estimate of the difference you expect to see between treatments\nE. The number of individuals with the condition that pass through your institution per year\n\n\n\nAnswer\n\nB, C, and D are all important. E can also be useful for approximating trial duration.\n\n\n\n\nExample(s)\nHere we present a couple of very short examples of how sample size calculations can be performed, although we do recommend discussing your project with a statistician.\n\nThe NHST framework\nSuppose we want to estimate the mean difference between two groups (intervention vs placebo) and would like to be able to test it against “no difference”. We have to define which difference will be clinically relevant to test. Let assume that a difference of 20 between both groups is clinically relevant. We also need to guess in an educated way the standard deviation (SD) of the outcome in the groups. Let assume a SD of 12 in each group. We also have to set the power we want to achieve and the probability of type I error (alpha) we will allowed. In this example a power of 90% with a two-sided alpha of 5% can be reached with a sample size of 18, i.e. 9 participants in each group, to test if this difference is equal to null.\nParameters to assume or set:\n\nmean difference (delta)\nstandard deviations\npower\nprobability of type I error (alpha)\n\n\npower.t.test(delta = 20, sd = 12, sig.level = 0.05, power = .9,\n             type = \"two.sample\",\n             alternative = \"two.sided\")\n\n\n     Two-sample t test power calculation \n\n              n = 8.649245\n          delta = 20\n             sd = 12\n      sig.level = 0.05\n          power = 0.9\n    alternative = two.sided\n\nNOTE: n is number in *each* group\n\n\nIf the difference between both groups is smaller the requested sample size to reach the same power with all the other parameters as above will be larger. Similarly, increasing the larger variation around the mean (larger standard deviation) also increases the sample size.\n\npower.t.test(delta = 10, sd = 12, sig.level = 0.05, power = .9,\n             type = \"two.sample\",\n             alternative = \"two.sided\")\n\n\n     Two-sample t test power calculation \n\n              n = 31.25372\n          delta = 10\n             sd = 12\n      sig.level = 0.05\n          power = 0.9\n    alternative = two.sided\n\nNOTE: n is number in *each* group\n\n\nMultiple plausible scenario can be investigated, by varying some parameters. The sse package (Fabbro (2021)), provides a mechanism to create multiple scenarios and examine power in each, together with functions to aid reporting. sse is very flexible, but does require some programming.\n\nlibrary(sse)\n\n## defining the range of n and theta to be evaluated\npsi <- powPar(\n  # SD values\n  theta = seq(from = 5, to = 20, by = 1),\n  # sample sizes\n  n = seq(from = 5, to = 50, by = 2),\n  # group means\n  muA = 0,\n  muB = 20)\n\n## define a function to return the power in each scenario\npowFun <- function(psi){\n  power.t.test(n = n(psi)/2,\n               delta = pp(psi, \"muA\") - pp(psi, \"muB\"),\n               sd = theta(psi)\n  )$power\n}\n\n## evaluate the power-function for all combinations of n and theta\ncalc <- powCalc(psi, powFun)\n\n## choose one particular example at theta of 1 and power of 0.9\npow <- powEx(calc, theta = 12, power = 0.9)\n\n## drawing the power plot with 3 contour lines\nplot(pow,\n     xlab = \"Standard Deviation\",\n     ylab = \"Total Sample Size\",\n     at = c(0.85, 0.9, 0.95))\n\n\n\n\nFor additional details, see the sse package documentation on CRAN.\n\n\nThe precision based framework\nSuppose we want to estimate the proportion of deaths within 30 days of a myocardial infarction (MI). Law, Watt, and Wald (2002) estimated that 36% (31% - 40%) of patients died within 30 days of an MI. If we want to replicate their study, we can estimate the number of participants that would be necessary to achieve a CI which is 9% wide. Members of the SCTO Statistics and Methodology platform created an R package specifically for this problem called presize (Haynes et al. (2021)). It is available on CRAN or as an easy to use shiny application.\nThe relevant function in presize is the prec_prop function. Plugging in the numbers from above, we can see that we require 434 participants (column n) to yield a confidence interval from 31.6% (lwr) to 40.6% (upr).\n\nlibrary(presize)\nprec_prop(p = 0.36, conf.width = 0.09)\n\n\n     sample size for a proportion with Wilson confidence interval. \n\n     p      padj        n conf.width conf.level       lwr       upr\n1 0.36 0.3612296 433.5577       0.09       0.95 0.3162296 0.4062296\n\nNOTE: padj is the adjusted proportion, from which the ci is calculated.\n\n\nIf we know that we can only afford to follow 300 participants, we can see what the confidence interval would be in that case too, via the n argument (instead of cond.width):\n\nprec_prop(p = 0.36, n = 300)\n\n\n     precision for a proportion with Wilson confidence interval. \n\n     p    padj   n conf.width conf.level       lwr       upr\n1 0.36 0.36177 300  0.1080014       0.95 0.3077693 0.4157707\n\nNOTE: padj is the adjusted proportion, from which the ci is calculated.\n\n\nIt’s also possible to check multiple scenarios, by passing multiple values to a parameter. Below we vary the number of participants (what CI width is possible to determine with that number of participants?):\n\nprec_prop(p = .36, n = c(300, 350, 400, 450, 450))\n\n\n     precision for a proportion with Wilson confidence interval. \n\n     p      padj   n conf.width conf.level       lwr       upr\n1 0.36 0.3617700 300 0.10800136       0.95 0.3077693 0.4157707\n2 0.36 0.3615199 350 0.10007265       0.95 0.3114836 0.4115562\n3 0.36 0.3613317 400 0.09366763       0.95 0.3144979 0.4081655\n4 0.36 0.3611850 450 0.08835346       0.95 0.3170083 0.4053617\n5 0.36 0.3611850 450 0.08835346       0.95 0.3170083 0.4053617\n\nNOTE: padj is the adjusted proportion, from which the ci is calculated.\n\n\nThe results can also be plotted easily, which is particularly useful when running multiple scenarios.\n\nlibrary(ggplot2)  # for plotting\nlibrary(magrittr) # for 'piping'\n\nprec_prop(p = .36, n = c(300, 350, 400, 450, 500)) %>% \n  as.data.frame() %>% \n  ggplot(aes(x = n, y = conf.width)) +\n  geom_line() +\n  labs(x = \"N participants\", \n       y = \"CI width\")\n\n\n\n\nFor additional details and examples, see the presize website.\n\n\n\nConclusion\nSample size calculation is a very important part of the study planning process. To make the most of your meeting with the statistician, have the answers to the questions mentioned above.\n\n\nQuiz answers\nQuestion 1: A (it’s a false positive).\nQuestion 2: B or C (a larger sample increases power which reduces the risk of a type 2 error).\nQuestion 3: C (you’re not testing a difference, just trying the estimate the quantity to within a given limit).\nQuestion 4: B, C, and D (these are all important. E can also be useful for approximating trial duration.\n\n\n\n\n\n\n\n\nReferences\n\nFabbro, Thomas. 2021. Sse: Sample Size Estimation. https://CRAN.R-project.org/package=sse.\n\n\nHaynes, Alan G., Armando Lenz, Odile Stalder, and Andreas Limacher. 2021. “‘Presize‘: An r-Package for Precision-Based Sample Size Calculation in Clinical Research.” Journal of Open Source Software 6 (60): 3118. https://doi.org/10.21105/joss.03118.\n\n\nLaw, Malcolm R., Hilary C. Watt, and Nicholas J. Wald. 2002. “The Underlying Risk of Death After Myocardial Infarction in the Absence of Treatment.” Archives of Internal Medicine 162 (21): 2405–10. https://doi.org/10.1001/archinte.162.21.2405."
  },
  {
    "objectID": "for_clinicians.html",
    "href": "for_clinicians.html",
    "title": "For clinicians",
    "section": "",
    "text": "This page provides a set of tools and help files relevant for clinicians."
  },
  {
    "objectID": "for_programmers.html",
    "href": "for_programmers.html",
    "title": "For Programmers",
    "section": "",
    "text": "This page provides a set of tools and help files relevant for programmers."
  },
  {
    "objectID": "baselinetables.html",
    "href": "baselinetables.html",
    "title": "Make a baseline table",
    "section": "",
    "text": "Epidemiologic and clinical research papers often describe the study sample in a first, baseline table. Providing a baseline table is one of the recommendations of the CONSORT (Moher et al. (2012)) and STROBE (von Elm et al. (2007)) statements. If well-executed, it provides a rapid, objective, and coherent grasp of the data and can illuminate potential threats to internal and external validity (Hayes-Larson et al. (2019))."
  },
  {
    "objectID": "baselinetables.html#in-r",
    "href": "baselinetables.html#in-r",
    "title": "Make a baseline table",
    "section": "In R",
    "text": "In R\n\nData\n\nlibrary(dplyr)\nlibrary(Hmisc)\ndata(mtcars)\nmtcars$am_f <- factor(mtcars$am, 0:1, c(\"Manual\", \"Automatic\")) \nmtcars$vs_f <- factor(mtcars$vs, 0:1, c(\"V\", \"Straight\")) \nd <- mtcars %>%  select(mpg, cyl, am_f,vs_f)\nHmisc::label(d$mpg) <- \"Miles per gallon\"\nHmisc::label(d$cyl) <- \"Cylinders\"\nHmisc::label(d$am_f) <- \"Transmission\"\nHmisc::label(d$vs_f) <- \"Engine\"\n\n\n\nUsing gtsummary\n\n#Make a table stratify the table by transmission\nlibrary(gtsummary)\nd %>%  tbl_summary(by = am_f)\n\n\n\n\n\n  \n  \n    \n      Characteristic\n      Manual, N = 191\n      Automatic, N = 131\n    \n  \n  \n    Miles per gallon\n17.3 (14.9, 19.2)\n22.8 (21.0, 30.4)\n    Cylinders\n\n\n    4\n3 (16%)\n8 (62%)\n    6\n4 (21%)\n3 (23%)\n    8\n12 (63%)\n2 (15%)\n    Engine\n\n\n    V\n12 (63%)\n6 (46%)\n    Straight\n7 (37%)\n7 (54%)\n  \n  \n  \n    \n      1 Median (IQR); n (%)\n    \n  \n\n\n\n\n\n\nThis is the basic usage; defaults options may be customized.\n\nVariable types are automatically detected so that appropriate descriptive statistics are calculated.\nLabel attributes from the data set are automatically printed.\nMissing values are listed as “Unknown” in the table.\nVariable levels are indented and footnotes are added.\n\nOnce produced gtsummary tables can be converted to your favorite format (e.g. html/pdf/word). For more information see here)\n\n# declare cylinders as a continuous variable, for this variable calculate the mean and sd value, add an overall column, change the missing text\nd %>%\n        tbl_summary(by = am_f, \n                    type = list(cyl ~ 'continuous'),\n                    statistic = list(cyl ~ \"{mean} ({sd})\"),\n                    missing_text = \"Missing\") %>%\n        add_overall()\n\n\n\n\n\n  \n  \n    \n      Characteristic\n      Overall, N = 321\n      Manual, N = 191\n      Automatic, N = 131\n    \n  \n  \n    Miles per gallon\n19.2 (15.4, 22.8)\n17.3 (14.9, 19.2)\n22.8 (21.0, 30.4)\n    Cylinders\n6.19 (1.79)\n6.95 (1.54)\n5.08 (1.55)\n    Engine\n\n\n\n    V\n18 (56%)\n12 (63%)\n6 (46%)\n    Straight\n14 (44%)\n7 (37%)\n7 (54%)\n  \n  \n  \n    \n      1 Median (IQR); Mean (SD); n (%)\n    \n  \n\n\n\n\n\n\n\nAs before, the function detects variable type and uses an appropriate statistical test. If needed defaults may be customized.\n\nAdditional information\nFor more detailed tutorial and additional options see the very complete vignette and website\n\n\n\nUsing atable\n\nlibrary(atable)\ntable1=atable(d,\n       target_cols = c(\"mpg\" , \"cyl\" , \"vs_f\"),\n       group_col = \"am_f\",\n       format_to=\"Word\")\n\nor similar using the formula interface\n\ntable1=atable(mpg+cyl+ vs_f ~ am_f, d,\n              format_to=\"Word\")\ntable1\n\n\n\n                       Group    Manual Automatic      p stat   Effect Size (CI)\n1              Observations                                                    \n2           &emsp;   &emsp;         19        13   <NA> <NA>               <NA>\n3  Miles per gallon  &emsp;                                                    \n4          &emsp;  Mean (SD)  17 (3.8)  24 (6.2) 0.0019 0.64 -1.5 (-2.3; -0.65)\n5    &emsp;  valid (missing)    19 (0)    13 (0)   <NA> <NA>               <NA>\n6                 Cylinders                                                    \n7          &emsp;  Mean (SD) 6.9 (1.5) 5.1 (1.6)  0.013 0.48      1.2 (0.41; 2)\n8    &emsp;  valid (missing)    19 (0)    13 (0)   <NA> <NA>               <NA>\n9                    Engine                                                    \n10                 &emsp;  V  63% (12)   46% (6)   0.56 0.35       2 (0.38; 11)\n11          &emsp;  Straight   37% (7)   54% (7)   <NA> <NA>               <NA>\n12           &emsp;  missing    0% (0)    0% (0)   <NA> <NA>               <NA>\n\n\nBy default atable is printing p-values, test statistics as well as effect sizes with a 95% confidence interval. As stated above baseline tables are descriptive tables and should not contain this type of information. Don’t forget to remove the columns.\n\ntable1=table1%>%select(-\"p\",-\"stat\",-\"Effect Size (CI)\")\ntable1\n\n                   Group    Manual Automatic\n1          Observations                     \n2                               19        13\n3  Miles per gallon                         \n4              Mean (SD)  17 (3.8)  24 (6.2)\n5        valid (missing)    19 (0)    13 (0)\n6             Cylinders                     \n7              Mean (SD) 6.9 (1.5) 5.1 (1.6)\n8        valid (missing)    19 (0)    13 (0)\n9                Engine                     \n10                     V  63% (12)   46% (6)\n11              Straight   37% (7)   54% (7)\n12               missing    0% (0)    0% (0)\n\n\n\n\nThe table may also be split in strata. For example, we can decide to present separately the characteristics of car with a “V” or a “Straight” engine.\n\ntable1=atable(mpg+cyl  ~ am_f|vs_f , d,\n              format_to=\"Word\")\ntable1=table1%>%select(-\"p\",-\"stat\",-\"Effect Size (CI)\")\ntable1\n\n\n\nAs gtsummary, atable may be exported in different formats (e.g. LATEX, HTML, Word) and it is intended that some parts of atable can be altered by the user. For example the variable type may defined otherwise (for more details see Ströbel (2019) as well as the package vignette. An other informative vignette can be found by typing the following command in R:\n\nvignette(\"modifying\", package = \"atable\")"
  },
  {
    "objectID": "baselinetables.html#instalation",
    "href": "baselinetables.html#instalation",
    "title": "Make a baseline table",
    "section": "Instalation",
    "text": "Instalation\n\n#In order to install btable from github the github-package is required:\nnet install github, from(\"https://haghish.github.io/github/\")\n#You can then install the development version of btable with:\ngithub install CTU-Bern/btable"
  },
  {
    "objectID": "baselinetables.html#example",
    "href": "baselinetables.html#example",
    "title": "Make a baseline table",
    "section": "Example",
    "text": "Example\n\n# load example dataset\nsysuse auto2\n# generate table\nbtable price mpg rep78 headroom, by(foreign) saving(\"excars\") denom(nonmiss)\n# format table (default formatting, removing the effect measures and P-values)\nbtable_format using \"excars\", clear drop(effect test)\n\n\ndat <- readr::read_csv(\"docs/btab1.csv\")\ndat[is.na(dat)] <- \"\" # replace NAs\nnames(dat)[1] <- \" \"  # set missing var name\ndat %>%\n  flextable::flextable() %>%\n  flextable::autofit() #%>%\n\n\n\n Total (N = 74)Domestic (N = 52)Foreign (N = 22)Descriptivesmean (sd) or n (%)mean (sd) or n (%)mean (sd) or n (%)Price6165 (2949)6072 (3097)6385 (2622)mean (sd)Mileage (mpg)21 (5.8)20 (4.7)25 (6.6)mean (sd)Repair Record 1978Poor2 (2.9%)2 (4.2%)0 (0.00%)n (%)Fair8 (12%)8 (17%)0 (0.00%)n (%)Average30 (43%)27 (56%)3 (14%)n (%)Good18 (26%)9 (19%)9 (43%)n (%)Excellent11 (16%)2 (4.2%)9 (43%)n (%)Headroom (in.)3.0 (0.85)3.2 (0.92)2.6 (0.49)mean (sd)\n\n  # flextable::save_as_image( path = \"Table/btabl1.png\")\n\n\n\nThe formatting option can be modified. For example we can decide we may want to\n\npresent the median and lower and upper quartiles instead of the mean and standard deviation\nremove the overall column, and the information column\n\n\n#If we want to display median [lq, up] for all the continuous variables\nbtable_format using \"excars\", clear descriptive(conti median [lq, uq]) drop(effect test total info)\n#If we want to display mean (sd) for the mpg variable and median [lq, up] for all the other continuous variables\nbtable_format using \"excars\", clear desc(conti median [lq, uq] mpg mean (sd)) drop(effect test total info)\n\n\ndat <- readr::read_csv(\"docs/btab2.csv\")\ndat[is.na(dat)] <- \"\" # replace NAs\nnames(dat)[1] <- \" \"  # set missing var name\ndat %>%\n  flextable::flextable() %>%\n  flextable::autofit() #%>%\n\n\n\n Domestic (N = 52)Foreign (N = 22)mean (sd), median [lq, uq] or n (%)mean (sd), median [lq, uq] or n (%)Price4783 [4184, 6234]5759 [4499, 7140]Mileage (mpg)20 (4.7)25 (6.6)Repair Record 1978Poor2 (4.2%)0 (0.00%)Fair8 (17%)0 (0.00%)Average27 (56%)3 (14%)Good9 (19%)9 (43%)Excellent2 (4.2%)9 (43%)Headroom (in.)3.5 [2.3, 4.0]2.5 [2.5, 3.0]\n\n  # flextable::save_as_image( path = \"Table/btabl2.png\")"
  },
  {
    "objectID": "blog/about.html",
    "href": "blog/about.html",
    "title": "About",
    "section": "",
    "text": "About this blog"
  },
  {
    "objectID": "blog/index.html",
    "href": "blog/index.html",
    "title": "blog",
    "section": "",
    "text": "news\n\n\ncode\n\n\nanalysis\n\n\n\n\n\n\n\n\n\n\n\nAug 15, 2022\n\n\nHarlow Malloc\n\n\n\n\n\n\n  \n\n\n\n\n\n\n\n\n\n\nnews\n\n\n\n\n\n\n\n\n\n\n\nAug 12, 2022\n\n\nTristan O’Malley\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "blog/posts/post-with-code/index.html",
    "href": "blog/posts/post-with-code/index.html",
    "title": "Post With Code",
    "section": "",
    "text": "1 + 1\n\n[1] 2"
  },
  {
    "objectID": "blog/posts/welcome/index.html",
    "href": "blog/posts/welcome/index.html",
    "title": "Welcome To My Blog",
    "section": "",
    "text": "Since this post doesn’t specify an explicit image, the first image in the post will be used in the listing page of posts."
  }
]